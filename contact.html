<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Contact-Agorra</title>
  <style>
    body{
      font-family: Inter, Arial;
      margin: 0;
      background: linear-gradient(180deg, #fff, #f7f5f7);
      color: #111;
    }
    header{
      padding: 18px 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .wrap{
      max-width: 900px;
      margin: 36px auto;
      padding: 20px;
    }
    form{
      background: #fff;
      padding: 22px;
      border-radius: 12px;
      box-shadow: 0 10px 30px rgba(10,10,10,0.06);
    }
    label{
      display: block;
      margin-top: 12px;
      font-weight: 600;
    }
    input, textarea{
      width: 100%;
      padding: 12px;
      border-radius: 10px;
      border: 1px solid #e6e6e6;
      margin-top: 6px;
    }
    button{
      margin-top: 14px;
      padding: 12px 16px;
      border-radius: 10px;
      background: #111;
      color: #fff;
      border: 0;
      font-weight: 700;
    }
    .success{
      background: #e6ffef;
      border-left: 4px solid #00a651;
      padding: 12px;
      margin-top: 12px;
      border-radius: 8px;
    }
  </style>
</head>
<body>
  <header>
    <div style="font-family: Playfair Display, serif; font-weight: 700;">AGORRA</div>
    <div><a href="./home2.html">IJ Retour</a></div>
  </header>
  <main class="wrap">
    <h2>Contactez-nous</h2>
    <p>Remplissez le formulaire ci-dessous pour nous envoyer un message.</p>
    <form id="contactForm">
      <label for="name">Nom</label>
      <input id="name" name="name" required>
      <label for="email">Email</label>
      <input id="email" name="email" type="email" required>
      <label for="message">Message</label>
      <textarea id="message" name="message" rows="6" required></textarea>
      <button type="submit">Envoyer</button>
      <div id="status"></div>
    </form>
    <p style="margin-top: 18px; color: #6b6b6b;">Note: This form will try to POST to <code>/submit-contact</code>. If you don't have a backend yet, the page will save a draft locally(localStorage).</p>
  </main>
  <script>
    const form=document.getElementById('contactForm');
    const status=document.getElementById('status');
    form.addEventListener('submit', async(e)=>{
      e.preventDefault();
      const data={
        name: form.name.value.trim(), email: form.email.value.trim(), message: form.message.value.trim(), created_at: new Date().toISOString()
      };
      try{
        const res = await fetch('/submit-contact',{
          method: 'POST', headers:{
            'Content-type': 'application/json'}, body: JSON.stringify(data)
          });
          if(res.ok){
            status.innerHTML = '<div class="success">Message envoy - merci !</div>'; form.reset(); return;}
          }catch(err){}
          const drafts = JSON.parse(localStorage.getItem('agorra_contacts')||`[]`);
          drafts.push(data);
          localStorage.setItem('agorra_contacts', JSON.stringify(drafts));
          status.innerHTML = '<div class="success">Hors-line: message sauvegard√© localement. Il sera envoye quand vous aurez configure un backend.</div>';
          form.reset;
      });
  </script>
</body>
</html>